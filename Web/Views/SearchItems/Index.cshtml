@using Web.Models.SearchItems
@using BloodSearch.Models.Api.Models.Offers;
@using BloodSearch.Core.Extensions;

@model SearchItemsIndexResponse

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8">
    <title>Поиск объявлений — BloodSearch.com</title>
    <link rel="stylesheet" href="/content/css/styles.css" type="text/css" media="screen, projection" />
    <script src="~/Scripts/jquery-3.2.1.min.js"></script>
    <script src="~/Scripts/Pages/SearchItems/search-filter-back-scroll.js"></script>
</head>
<body>
    @Html.Partial("_Header", 2)
    <main>
        <div class="wrap">
            <div class="search">
                @if (Model.TotalCount != 0) {
                <h1>Всего найдено @Model.TotalCount объявления</h1>
                } else {
                <h1>По вашему запросу ничего не найдено</h1>
                }
            </div>

            <div class="frame shadow search">
                <div class="search-content">
                    <h1 class="search-title">Фильтр</h1>
                    <form method="get" action="/search/">
                        <div class="search-row">
                            <div class="search-row__item">
                                <h3 class="search-row__item-title">Тип объявления:</h3>
                                <select id="type" name="Type">
                                    <option value="3" selected>Не выбрано</option>
                                    <option value="1">Донор</option>
                                    <option value="2">Реципиент</option>
                                </select>
                            </div>
                            <div class="search-row__item">
                                <h3 class="search-row__item-title">Категория крови:</h3>
                                <select id="category" name="Cat">
                                    <option selected>Не выбрано</option>
                                    <option value="1">O(I) Rh−</option>
                                    <option value="2">O(I) Rh+</option>
                                    <option value="3">A(II) Rh−</option>
                                    <option value="4">A(II) Rh+</option>
                                    <option value="5">B(III) Rh-</option>
                                    <option value="6">B(III) Rh+</option>
                                    <option value="7">AB(IV) Rh−</option>
                                    <option value="8">AB(IV) Rh+</option>
                                </select>
                            </div>
                            <div class="search-row__item">
                                <h3 class="search-row__item-title">Регион:</h3>
                                <select id="address" name="Reg">
                                    <option selected>Не выбрано</option>
                                    <option value="53000056">Адыгея</option>
                                    <option value="53000015">Алтайский край</option>
                                    <option value="53000016">Амурская область</option>
                                    <option value="53000017">Архангельская область</option>
                                    <option value="53000018">Астраханская область</option>
                                    <option value="53000058">Башкортостан</option>
                                    <option value="53000019">Белгородская область</option>
                                    <option value="53000020">Брянская область</option>
                                    <option value="53000059">Бурятия</option>
                                    <option value="53000021">Владимирская область</option>
                                    <option value="53000022">Волгоградская область</option>
                                    <option value="53000023">Вологодская область</option>
                                    <option value="53000024">Воронежская область</option>
                                    <option value="53000060">Дагестан</option>
                                    <option value="53000025">Еврейская автономная область</option>
                                    <option value="53000026">Забайкальский край</option>
                                    <option value="53000027">Ивановская область</option>
                                    <option value="53000061">Ингушетия</option>
                                    <option value="53000028">Иркутская область</option>
                                    <option value="53000029">Кабардино-Балкария</option>
                                    <option value="53000030">Калининградская область</option>
                                    <option value="53000062">Калмыкия</option>
                                    <option value="53000031">Калужская область</option>
                                    <option value="53000032">Камчатский край</option>
                                    <option value="53000033">Карачаево-Черкесия</option>
                                    <option value="53000034">Кемеровская область</option>
                                    <option value="53000035">Кировская область</option>
                                    <option value="53000036">Костромская область</option>
                                    <option value="53000037">Краснодарский край</option>
                                    <option value="53000038">Красноярский край</option>
                                    <option value="53000039">Курганская область</option>
                                    <option value="53000040">Курская область</option>
                                    <option value="53000041">Ленинградская область</option>
                                    <option value="53000042">Липецкая область</option>
                                    <option value="53000043">Магаданская область</option>
                                    <option value="53000065">Марий Эл</option>
                                    <option value="53000066">Мордовия</option>
                                    <option value="53000094">Москва</option>
                                    <option value="53000044">Московская область</option>
                                    <option value="53000045">Мурманская область</option>
                                    <option value="53000119">Ненецкий автономный округ</option>
                                    <option value="53000046">Нижегородская область</option>
                                    <option value="53000047">Новгородская область</option>
                                    <option value="53000048">Новосибирская область</option>
                                    <option value="53000049">Омская область</option>
                                    <option value="53000050">Оренбургская область</option>
                                    <option value="53000051">Орловская область</option>
                                    <option value="53000052">Пензенская область</option>
                                    <option value="53000053">Пермский край</option>
                                    <option value="53000054">Приморский край</option>
                                    <option value="53000055">Псковская область</option>
                                    <option value="53000057">Республика Алтай</option>
                                    <option value="53000063">Республика Карелия</option>
                                    <option value="53000064">Республика Коми</option>
                                    <option value="1444278541">Республика Крым</option>
                                    <option value="53000072">Ростовская область</option>
                                    <option value="53000073">Рязанская область</option>
                                    <option value="53000074">Самарская область</option>
                                    <option value="53152804">Санкт-Петербург</option>
                                    <option value="53000075">Саратовская область</option>
                                    <option value="53000076">Сахалинская область</option>
                                    <option value="53000077">Свердловская область</option>
                                    <option value="1443782437">Севастополь</option>
                                    <option value="53000068">Северная Осетия</option>
                                    <option value="53000078">Смоленская область</option>
                                    <option value="53000079">Ставропольский край</option>
                                    <option value="53000080">Тамбовская область</option>
                                    <option value="53000069">Татарстан</option>
                                    <option value="53000081">Тверская область</option>
                                    <option value="53000082">Томская область</option>
                                    <option value="53000083">Тульская область</option>
                                    <option value="53000070">Тыва</option>
                                    <option value="53000084">Тюменская область</option>
                                    <option value="53000085">Удмуртия</option>
                                    <option value="53000086">Ульяновская область</option>
                                    <option value="53000087">Хабаровский край</option>
                                    <option value="53000071">Хакасия</option>
                                    <option value="53000120">Ханты-Мансийский автономный округ</option>
                                    <option value="53000088">Челябинская область</option>
                                    <option value="53000089">Чечня</option>
                                    <option value="53000090">Чувашия</option>
                                    <option value="53000091">Чукотский автономный округ</option>
                                    <option value="53000067">Якутия</option>
                                    <option value="53000121">Ямало-Ненецкий автономный округ</option>
                                    <option value="53000092">Ярославская область</option>
                                </select>
                            </div>
                            <div class="search-row__item-btn">
                                <input type="submit" class="btn btn--red search-btn" value="Поиск" />
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            @if (Model.Items.Any()) {
            <div>
                <ul class="listing">
                    @foreach (var item in Model.Items) {
                    <li class="listing__item">
                        <a href="/item/@item.Id" class="offer-snippet">
                            <div class="offer-snippet-gallery">
                                @if (item.Type == OfferTypeEnum.Donor) {
                                <img src="~/Content/img/donor.jpg" alt="" class="offer-snippet-gallery__img" style="width:225px; height: 225px;">
                                } else {
                                <img src="~/Content/img/recipient.jpg" alt="" class="offer-snippet-gallery__img" style="width:225px; height: 225px;">
                                }
                            </div>

                            <div class="offer-snippet__content-box">
                                <div class="offer-snippet__content">
                                    @if (item.Type == OfferTypeEnum.Donor) {
                                    <h3>Донор крови</h3>
                                    } else {
                                    <h3>Реципиенту требуется донор</h3>
                                    }
                                    <p class="field">Категория крови: <span>@item.Offer.Category.ToEnumString()</span></p>
                                    <p class="field">Дата обращения: <span>@item.CreatedDate.ToLongDateString()</span></p>
                                    <p class="field">@item.Offer.Description</p>
                                </div>
                                <div class="offer-snippet__footer">
                                    <p>Адрес: <span>@item.Offer.GeoAddress.Address</span></p>
                                </div>
                            </div>
                        </a>
                    </li>
                    }
                </ul>
            </div>
            }

            @if (Model.TotalCount > 10 && Model.PagingFilter.MaxPageNumber > 1) {
            <div class="frame">
                @Html.Partial("_PaginationPartial", Model)
            </div>
            }

        </div>
    </main>

    @Html.Partial("_Footer", Model.Items.Count < 2)

    <style>
        .field {
            margin-top: 15px;
        }
    </style>

    <script>
        $(function () {
            $("#type option[value='@((int)Model.Filter.Type)']").attr('selected', 'selected');
            $("#category option[value='@((int)Model.Filter.Categories.FirstOrDefault())']").attr('selected', 'selected');
            $("#address option[value='@Model.Filter.RegionId']").attr('selected', 'selected');
        });
    </script>
</body>
</html>